<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>API Features - RPi Waiting Time Display</title>
    <style>
        :root {
            --primary-color: #2ea44f;
            --text-color: #24292e;
            --border-color: #e1e4e8;
            --feature-available: #2ea44f;
            --feature-unavailable: #d73a49;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif;
            line-height: 1.6;
            color: var(--text-color);
            margin: 0;
            padding: 0;
        }

        .container {
            max-width: 1012px;
            margin: 0 auto;
            padding: 2rem 1rem;
        }

        .back-link {
            display: inline-block;
            margin-bottom: 2rem;
            color: var(--primary-color);
            text-decoration: none;
        }

        .back-link:hover {
            text-decoration: underline;
        }

        .api-section {
            margin: 3rem 0;
            padding: 2rem;
            border: 1px solid var(--border-color);
            border-radius: 6px;
            background: #fff;
        }

        .api-section h2 {
            margin-top: 0;
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            margin: 1.5rem 0;
        }

        .comparison-table th,
        .comparison-table td {
            padding: 1rem;
            border: 1px solid var(--border-color);
            text-align: left;
        }

        .comparison-table th {
            background: #f6f8fa;
        }

        .feature-status {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .feature-status::before {
            content: "";
            display: inline-block;
            width: 1rem;
            height: 1rem;
            border-radius: 50%;
        }

        .available::before {
            background-color: var(--feature-available);
        }

        .unavailable::before {
            background-color: var(--feature-unavailable);
        }

        .api-info {
            margin-top: 1.5rem;
            padding: 1rem;
            background: #f6f8fa;
            border-radius: 4px;
        }

        .api-info h3 {
            margin-top: 0;
        }

        .api-info a {
            color: var(--primary-color);
            text-decoration: none;
        }

        .api-info a:hover {
            text-decoration: underline;
        }

        .image-comparison {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
            margin-top: 1.5rem;
        }

        .image-comparison img {
            width: 100%;
            height: auto;
            border-radius: 4px;
            border: 1px solid var(--border-color);
        }

        .image-comparison-label {
            text-align: center;
            margin-top: 0.5rem;
            font-weight: 600;
        }
    </style>
</head>
<body>
    <div class="container">
        <a href="../" class="back-link">‚Üê Back to home</a>
        <h1>API Features Comparison</h1>
        
        <div class="api-section">
            <h2>‚òÄÔ∏è Weather APIs</h2>
            <p>The application supports two weather data providers: OpenMeteo (default) and OpenWeatherMap.</p>
            <table class="comparison-table">
                <tr>
                    <th>Feature</th>
                    <th>OpenMeteo</th>
                    <th>OpenWeatherMap</th>
                </tr>
                <tr>
                    <td>Current Temperature</td>
                    <td><span class="feature-status available">Available</span></td>
                    <td><span class="feature-status available">Available</span></td>
                </tr>
                <tr>
                    <td>Weather Conditions</td>
                    <td><span class="feature-status available">Available</span></td>
                    <td><span class="feature-status available">Available</span></td>
                </tr>
                <tr>
                    <td>3-Day Forecast</td>
                    <td><span class="feature-status available">Available</span></td>
                    <td><span class="feature-status available">Available</span></td>
                </tr>
                <tr>
                    <td>Sunrise/Sunset Times</td>
                    <td><span class="feature-status available">Available</span></td>
                    <td><span class="feature-status available">Available</span></td>
                </tr>
                <tr>
                    <td>Air Quality</td>
                    <td><span class="feature-status available">Available</span></td>
                    <td><span class="feature-status available">Available</span></td>
                </tr>
                <tr>
                    <td>API Key Required</td>
                    <td><span class="feature-status available">No</span></td>
                    <td><span class="feature-status unavailable">Yes</span></td>
                </tr>
                <tr>
                    <td>Sunshine hours</td>
                    <td><span class="feature-status available">Yes</span></td>
                    <td><span class="feature-status unavailable">No</span></td>
                </tr>
            </table>
            <div class="api-info">
                <h3>OpenMeteo (Default)</h3>
                <p>OpenMeteo is the default provider and requires no API key. It offers:</p>
                <ul>
                    <li>Free, no registration required</li>
                    <li>High rate limits</li>
                    <li>Accurate weather data from multiple sources</li>
                </ul>
                <p>To use OpenMeteo, simply set <code>WEATHER_PROVIDER=openmeteo</code> in your .env file (this is the default).</p>
                
                <h3>OpenWeatherMap</h3>
                <p>OpenWeatherMap is an alternative provider that requires an API key:</p>
                <ol>
                    <li>Sign up at <a href="https://openweathermap.org/appid" target="_blank">OpenWeatherMap</a></li>
                    <li>Generate an API key in your account dashboard</li>
                    <li>Add these to your .env file:
                        <pre>
WEATHER_PROVIDER=openweather
OPENWEATHER_API_KEY=your_api_key</pre>
                    </li>
                </ol>
                <p>Note: If OpenWeatherMap is selected but no API key is provided, the application will automatically fall back to OpenMeteo.</p>
            </div>
        </div>

        <div class="api-section">
            <h2>‚úàÔ∏è AeroAPI (FlightAware)</h2>
            <table class="comparison-table">
                <tr>
                    <th>Feature</th>
                    <th>Without API Key</th>
                    <th>With API Key</th>
                </tr>
                <tr>
                    <td>Basic Flight Detection</td>
                    <td><span class="feature-status available">Available</span></td>
                    <td><span class="feature-status available">Available</span></td>
                </tr>
                <tr>
                    <td>Flight Altitude</td>
                    <td><span class="feature-status available">Available</span></td>
                    <td><span class="feature-status available">Available</span></td>
                </tr>
                <tr>
                    <td>Distance from Location</td>
                    <td><span class="feature-status available">Available</span></td>
                    <td><span class="feature-status available">Available</span></td>
                </tr>
                <tr>
                    <td>Flight Identification</td>
                    <td><span class="feature-status available">Tail number and callsign</span></td>
                    <td><span class="feature-status available">Flight number and airline</span></td>
                </tr>
                <tr>
                    <td>Origin/Destination</td>
                    <td><span class="feature-status unavailable">Not available</span></td>
                    <td><span class="feature-status available">Available</span></td>
                </tr>
                <tr>
                    <td>Aircraft Type</td>
                    <td><span class="feature-status available">Available</span></td>
                    <td><span class="feature-status available">Available</span></td>
                </tr>
            </table>
            <div class="image-comparison">
                <div>
                    <img src="../images/flight_display_without_aeroapi.png" alt="Flight display without AeroAPI">
                    <div class="image-comparison-label">Without AeroAPI</div>
                </div>
                <div>
                    <img src="../images/flight_display_with_aeroapi.png" alt="Flight display with AeroAPI">
                    <div class="image-comparison-label">With AeroAPI</div>
                </div>
            </div>
            <div class="api-info">
                <h3>How to Get an API Key</h3>
                <p>FlightAware's AeroAPI offers a free tier with $5 monthly quota:</p>
                <ol>
                    <li>Sign up at <a href="https://www.flightaware.com/commercial/aeroapi" target="_blank">FlightAware AeroAPI</a></li>
                    <li>Get your API key</li>
                    <li>Add the key to your .env file</li>
                </ol>
                <p>Note: The application is designed to stay within the free tier limits unless specifically authorized.</p>
            </div>
        </div>
        <div class="api-section">
            <h2>üöå Public Transport APIs</h2>
            <p>The application supports multiple public transport providers, with automatic fallback to static schedule data when realtime information is unavailable.</p>
            <table class="comparison-table">
                <tr>
                    <th>Feature</th>
                    <th>Realtime Data</th>
                    <th>Schedule Fallback</th>
                </tr>
                <tr>
                    <td>Arrival Times</td>
                    <td><span class="feature-status available">Live updates</span></td>
                    <td><span class="feature-status available">Static schedule</span></td>
                </tr>
                <tr>
                    <td>Time Indicators</td>
                    <td><span class="feature-status available">‚ö° for realtime</span></td>
                    <td><span class="feature-status available">üïí when mixed</span></td>
                </tr>
                <tr>
                    <td>Update Frequency</td>
                    <td><span class="feature-status available">Usually every 30 seconds</span></td>
                    <td><span class="feature-status available">Twice a week</span></td>
                </tr>
                <tr>
                    <td>Data Source</td>
                    <td><span class="feature-status available">Provider API</span></td>
                    <td><span class="feature-status available">GTFS data</span></td>
                </tr>
            </table>
            <div class="api-info">
                <h3>Supported realtime providers</h3>
                <ul>
                    <li>Belgium:
                        <ul>
                            <li>STIB/MIVB (Brussels) - RT: stib, Schedule: mdb-1088</li>
                            <li>De Lijn (Flanders) - RT: delijn, Schedule: mdb-684</li>
                        </ul>
                    </li>
                    <li>Hungary:
                        <ul>
                            <li>BKK (Budapest) - RT: bkk, Schedule: mdb-990</li>
                        </ul>
                    </li>
                </ul>
                <h3>Supported schedule providers</h3>
                <p>All the providers listed above also have a schedule-only mode, which is used when realtime data is not available. For public transport companies where the processing of realtime data is not programmed in, you can use the schedule-only mode, as long as you can find the company in the <a href="https://mobilitydatabase.org/" target="_blank"></a>Mobility Database</a>.</p>


                <h3>Fallback mechanism</h3>
                <p>The system automatically handles fallback between realtime and schedule data:</p>
                <ul>
                    <li>If realtime data is temporarily unavailable (e.g., during system startup or API issues), it switches to schedule data</li>
                    <li>Periodically checks if realtime data becomes available again</li>
                    <li>Uses exponential backoff to prevent overwhelming the system during outages</li>
                    <li>Visual indicators (‚ö°/üïí) show data source when mixing realtime and scheduled times</li>
                </ul>
            </div>
        </div>
        <div class="api-section">
            <h2>üîß Technical Details: APIs Used</h2>
            
            <h3>Weather Data</h3>
            <ul>
                <li><strong><a href="https://open-meteo.com/" target="_blank">OpenMeteo API</a></strong>
                    <ul>
                        <li>Purpose: Default weather data provider</li>
                        <li>Usage: Temperature, conditions, forecast data, and air quality</li>
                        <li>Free service, no registration required</li>
                        <li>Data sources: National weather services (GFS, DWD, MeteoFrance, ECMWF)</li>
                    </ul>
                </li>
                <li><strong><a href="https://openweathermap.org/api" target="_blank">OpenWeatherMap API</a></strong>
                    <ul>
                        <li>Purpose: Alternative weather data provider</li>
                        <li>Usage: Temperature, conditions, and forecast data</li>
                        <li>Free tier is sufficient for our needs</li>
                        <li>Requires API key</li>
                    </ul>
                </li>
            </ul>

            <h3>Flight Tracking</h3>
            <ul>
                <li><strong><a href="https://adsb.one/" target="_blank">ADSB.one API</a></strong>
                    <ul>
                        <li>Purpose: Basic flight tracking without authentication</li>
                        <li>Usage: Receives real-time aircraft position data from a network of ADS-B receivers</li>
                        <li>Free data source</li>
                        <li>No API key required</li>
                    </ul>
                </li>
                <li><strong><a href="https://www.flightaware.com/commercial/aeroapi/" target="_blank">FlightAware AeroAPI</a></strong>
                    <ul>
                        <li>Purpose: Enhanced flight information</li>
                        <li>Usage: Provides detailed flight data including origin/destination</li>
                        <li>Free tier includes $5 monthly quota (sufficient for typical use)</li>
                        <li>Optional API key</li>
                    </ul>
                </li>
            </ul>

            <h3>Astronomy and Space</h3>
            <ul>
                <li><strong><a href="https://celestrak.org/NORAD/elements/gp.php?CATNR=25544" target="_blank">Celestrak API</a></strong>
                    <ul>
                        <li>Purpose: Real-time ISS orbital data</li>
                        <li>Usage: Retrieves current ISS position and predicts passes</li>
                        <li>Free service, no authentication required</li>
                        <li>No API key required</li>
                    </ul>
                </li>
                <li><strong><a href="https://ssd.jpl.nasa.gov/orbits.html" target="_blank">NASA JPL Horizons API</a></strong>
                    <ul>
                        <li>Purpose: High-precision orbital calculations</li>
                        <li>Usage: Downloads ephemeris data (positions of celestial bodies) to predict the future position of the ISS based on its current position and to calculate the phases of the moon</li>
                        <li>Free service from NASA JPL</li>
                        <li>No API key required</li>
                    </ul>
                </li>
            </ul>

            <h3>Location Services</h3>
            <ul>
                <li><strong><a href="https://nominatim.org/release-docs/latest/" target="_blank">Nominatim API</a></strong>
                    <ul>
                        <li>Purpose: GPS coordinate validation and reverse geocoding</li>
                        <li>Usage: Validates location coordinates during setup and provides location names</li>
                        <li>Free OpenStreetMap service</li>
                        <li>No API key required</li>
                    </ul>
                </li>
            </ul>

            <div class="api-info">
                <h3>API Usage Notes</h3>
                <ul>
                    <li>The application is designed to work with minimal API requirements - only OpenWeatherMap is strictly required for full functionality</li>
                    <li>All APIs are used with appropriate rate limiting to stay within free tier limits</li>
                    <li>Fallback mechanisms are <i>mostly</i> in place for when optional APIs are unavailable</li>
                </ul>
            </div>
        </div>

      
    </div>
</body>
</html> 